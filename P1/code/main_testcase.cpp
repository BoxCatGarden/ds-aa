#include <iostream>
#include <string>
#include <iomanip>
using namespace std;

#include "core.h"


void test(string formula, core& translater) {
	translater.execute(formula.data());
	cout << formula << endl;
	if (translater.errorCode == -1) {
		cout << "= " + translater.old_post_formula << endl;
		cout << "= " << translater.result << endl;
	} else {
		cout << translater.errorInfo();
	}
}

int main() {

	char* cases[] = {
		/* put your cases here*/
		"1+#2",
			"2.23+66",
			"(2)",
			"1+",
			"1/0",
			"1+2.0-02.6*5+#2.5/#10",
			"1+2.0*3-2",
			"1+(2.0-02.6)*(5+#2.5)/#10",
			"(1+(2.0-02.6)*(5+#2.5)/#10)",
			"(2)",
			"(2+3)-6",
			"2+(3-6)",
			" ( 1 + ( 2.0 - 02.6 ) * ( 5 + # 2.5 ) / # 10 ) ",
			"1+#####2",
			"#1+####2",
			"#(2)",
			"",
			"+1+2.0*3-2",
			"1+2.0*3-2*",
			"1+2.0**3-2*",
			"1+2.0#3-2*",
			"1+2.0*3-2#",
			"1+2.0#*3-2*",
			"()+2.0*3-2",
			"1+2.0*3-()",
			"1+2.0*()-2",
			"1+2.0(3)-2",
			"1+(2.0)3-2",
			"1+(2.0)#3-2",
			"1+2.0#(3)-2",
			"((1+2.0*3-2)",
			"1+(2.0*(3-2)",
			"(1+2.0*3-2))",
			"(1+2.0)*3)-2",
			")(1+2.0*3-2",
			"1+2.0*3-2)(",
			"1+2.0)(*3-2",
			"(1+2.0)+(*3-2)",
			"(1+2.0+)+(3-2)",
			"(1+2.0#)+(3-2)",
			".1+2.0*3-2",
			"1+2.0*3-2.",
			"1+2.0*.3-2",
			"1+2.0*3.-2",
			"1+2.0*3.2.1-2",
			"1+2.0*3..21-2",
			"1+2 .0*3-2",
			"1+2. 0*3-2",
			"1+2.0 3*32-2",
			"1+2.0*3 2-2",			
			"1+2.0*3/0-2",
			"(1+2.0*3-2)/0",
			"(1+2.0*3-2)/(3*2-6)",
			"(1+2.0*3-2)/((3*3-9)/6)",
			NULL  //must end with NULL
	};
	core t;

	for (int i = 0; cases[i]; ++i) {
		cout << endl << i + 1 << endl;
		test(cases[i], t);
	}
	system("pause");
	return 0;
}

